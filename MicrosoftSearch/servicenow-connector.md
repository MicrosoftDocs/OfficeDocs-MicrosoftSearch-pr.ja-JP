---
title: Microsoft Search 用の ServiceNow コネクタ
ms.author: kam1
author: TheKarthikeyan
manager: harshkum
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Microsoft Search の ServiceNow コネクタをセットアップする
ms.openlocfilehash: 5bcc0870df7c2ad418bb2ae29e9d4d999dcbdf3f
ms.sourcegitcommit: 59cdd3f0f82b7918399bf44d27d9891076090f4f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/20/2020
ms.locfileid: "49367597"
---
# <a name="servicenow-connector"></a><span data-ttu-id="095be-103">ServiceNow コネクタ</span><span class="sxs-lookup"><span data-stu-id="095be-103">ServiceNow connector</span></span>

<span data-ttu-id="095be-104">ServiceNow コネクタを使用すると、組織は、すべてのユーザーに表示される、または組織内のユーザーの条件によって制限されるナレッジベースの記事のインデックスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="095be-104">With the ServiceNow connector, your organization can index knowledge-base articles that are visible to all users or restricted with user criteria permissions within your organization.</span></span> <span data-ttu-id="095be-105">ServiceNow からコネクタとインデックスコンテンツを構成した後は、エンドユーザーは任意の Microsoft 検索クライアントからこれらの記事を検索できます。</span><span class="sxs-lookup"><span data-stu-id="095be-105">After you configure the connector and index content from ServiceNow, end users can search for those articles from any Microsoft Search client.</span></span>  

<span data-ttu-id="095be-106">この記事は、Microsoft 365 管理者、または ServiceNow コネクタを構成、実行、および監視するユーザーを対象としています。</span><span class="sxs-lookup"><span data-stu-id="095be-106">This article is for Microsoft 365 administrators or anyone who configures, runs, and monitors a ServiceNow connector.</span></span> <span data-ttu-id="095be-107">コネクタとコネクタの機能、制限事項、およびトラブルシューティングの手法を構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="095be-107">It explains how to configure your connector and connector capabilities, limitations, and troubleshooting techniques.</span></span>

<span data-ttu-id="095be-108">Microsoft によって作成された microsoft [のコネクタを Microsoft Search 用にセットアップして、](https://docs.microsoft.com/microsoftsearch/configure-connector)microsoft の作成済みコネクタにアクセスする方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="095be-108">Learn how to access Microsoft built connectors from [Set up your Microsoft-built connector for Microsoft Search](https://docs.microsoft.com/microsoftsearch/configure-connector).</span></span> <span data-ttu-id="095be-109">ServiceNow connector 固有の構成については、以下の記事で説明します。</span><span class="sxs-lookup"><span data-stu-id="095be-109">ServiceNow connector specific configuration is explained in the article below.</span></span>

## <a name="connection-settings"></a><span data-ttu-id="095be-110">接続設定</span><span class="sxs-lookup"><span data-stu-id="095be-110">Connection Settings</span></span>
<span data-ttu-id="095be-111">ServiceNow データに接続するには、組織の **servicenow インスタンスの URL**、このアカウントの資格情報、および OAuth 認証用のクライアント ID とクライアントシークレットが必要です。</span><span class="sxs-lookup"><span data-stu-id="095be-111">To connect to your ServiceNow data, you need your organization's **ServiceNow instance URL**, credentials for this account, and the Client ID and Client Secret for OAuth authentication.</span></span>  

<span data-ttu-id="095be-112">組織の **ServiceNow インスタンスの URL** は、通常 **&lt; 、https://> service-now.com** のようになります。</span><span class="sxs-lookup"><span data-stu-id="095be-112">Your organization’s **ServiceNow instance URL** typically looks like **https://&lt;your-organization-domain>.service-now.com**.</span></span> <span data-ttu-id="095be-113">この URL に加えて、ServiceNow への接続を設定するためのアカウントと、更新スケジュールに基づいて、Microsoft Search が ServiceNow から定期的に記事を更新できるようにする必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-113">Along with this URL, you will need an account for setting up the connection to ServiceNow as well as for allowing Microsoft Search to periodically update the articles from ServiceNow based on the refresh schedule.</span></span> <span data-ttu-id="095be-114">少なくとも、このアカウントは <em>ナレッジ</em> の役割を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-114">The account should at least have <em>knowledge</em> role.</span></span> <span data-ttu-id="095be-115">[ServiceNow アカウントの役割を割り当てる方法について説明](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html)します。</span><span class="sxs-lookup"><span data-stu-id="095be-115">[Learn how to assign role for ServiceNow accounts](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span></span>

>[!NOTE]
><span data-ttu-id="095be-116">ユーザーおよびグループの id をクロールして、Microsoft 検索結果のナレッジ項目のアクセス許可を尊重する場合は、このアカウントに、ServiceNow の次の表のレコードを読み取るためのアクセス権が必要です。</span><span class="sxs-lookup"><span data-stu-id="095be-116">If you want to crawl user and group identities to honor access permissions of knowledge articles in Microsoft Search results, the account should have access to read the following table records in ServiceNow:</span></span>
>* <span data-ttu-id="095be-117">kb_uc_can_contribute_mtom</span><span class="sxs-lookup"><span data-stu-id="095be-117">kb_uc_can_contribute_mtom</span></span>
>* <span data-ttu-id="095be-118">kb_uc_can_read_mtom</span><span class="sxs-lookup"><span data-stu-id="095be-118">kb_uc_can_read_mtom</span></span>
>* <span data-ttu-id="095be-119">kb_uc_cannot_read_mtom</span><span class="sxs-lookup"><span data-stu-id="095be-119">kb_uc_cannot_read_mtom</span></span>
>* <span data-ttu-id="095be-120">kb_uc_cannot_contribute_mtom</span><span class="sxs-lookup"><span data-stu-id="095be-120">kb_uc_cannot_contribute_mtom</span></span>
>* <span data-ttu-id="095be-121">sys_user</span><span class="sxs-lookup"><span data-stu-id="095be-121">sys_user</span></span>
>* <span data-ttu-id="095be-122">sys_user_has_role</span><span class="sxs-lookup"><span data-stu-id="095be-122">sys_user_has_role</span></span>
>* <span data-ttu-id="095be-123">sys_user_grmember</span><span class="sxs-lookup"><span data-stu-id="095be-123">sys_user_grmember</span></span>
>* <span data-ttu-id="095be-124">user_criteria</span><span class="sxs-lookup"><span data-stu-id="095be-124">user_criteria</span></span>
>* <span data-ttu-id="095be-125">kb_knowledge_base</span><span class="sxs-lookup"><span data-stu-id="095be-125">kb_knowledge_base</span></span>  
> <span data-ttu-id="095be-126">Microsoft Search との接続に使用するアカウントの役割を作成して割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="095be-126">You can create and assign a role for the account you use to connect with Microsoft Search.</span></span> <span data-ttu-id="095be-127">その役割に対して、テーブルへの読み取りアクセス権を割り当てることができます。</span><span class="sxs-lookup"><span data-stu-id="095be-127">Read access to the tables can be assigned on that role.</span></span> <span data-ttu-id="095be-128">テーブルレコードへの読み取りアクセスを設定する方法については、「 [テーブルレコードを保護](https://developer.servicenow.com/dev.do#!/learn/learning-plans/orlando/new_to_servicenow/app_store_learnv2_securingapps_orlando_creating_and_editing_access_controls)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-128">To learn about setting read access to table records, see [Securing Table Records](https://developer.servicenow.com/dev.do#!/learn/learning-plans/orlando/new_to_servicenow/app_store_learnv2_securingapps_orlando_creating_and_editing_access_controls).</span></span>

<span data-ttu-id="095be-129">ServiceNow からコンテンツを認証および同期するには、次の3つのサポートされている方法 **のいずれか** を選択します。</span><span class="sxs-lookup"><span data-stu-id="095be-129">To authenticate and sync content from ServiceNow, choose **one of three** supported methods:</span></span> 
1. <span data-ttu-id="095be-130">基本認証</span><span class="sxs-lookup"><span data-stu-id="095be-130">Basic authentication</span></span> 
2. <span data-ttu-id="095be-131">ServiceNow OAuth (推奨)</span><span class="sxs-lookup"><span data-stu-id="095be-131">ServiceNow OAuth (recommended)</span></span>
3. <span data-ttu-id="095be-132">Azure AD OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="095be-132">Azure AD OpenID Connect</span></span>

#### <a name="basic-authentication"></a><span data-ttu-id="095be-133">基本認証</span><span class="sxs-lookup"><span data-stu-id="095be-133">Basic authentication</span></span>

<span data-ttu-id="095be-134">ユーザーのインスタンスに対して認証を行うための、 **サポート** の役割を持つ ServiceNow アカウントのユーザー名とパスワードを入力します。</span><span class="sxs-lookup"><span data-stu-id="095be-134">Enter the username and password of ServiceNow account with **knowledge** role to authenticate to your instance.</span></span>

#### <a name="servicenow-oauth"></a><span data-ttu-id="095be-135">ServiceNow OAuth</span><span class="sxs-lookup"><span data-stu-id="095be-135">ServiceNow OAuth</span></span>

<span data-ttu-id="095be-136">認証に ServiceNow OAuth を使用するには、Microsoft Search アプリがインスタンスにアクセスできるようにするために、servicenow 管理者が ServiceNow インスタンスでエンドポイントを準備する必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-136">To use ServiceNow OAuth for authentication, a ServiceNow admin needs to provision an endpoint in your ServiceNow instance, so that the Microsoft Search app can access the instance.</span></span> <span data-ttu-id="095be-137">詳細については、「クライアントが ServiceNow ドキュメントの [インスタンスにアクセスするためのエンドポイントを作成する](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) 」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-137">To learn more, see [Create an endpoint for clients to access the instance](https://docs.servicenow.com/bundle/newyork-platform-administration/page/administer/security/task/t_CreateEndpointforExternalClients.html) in the ServiceNow documentation.</span></span>

<span data-ttu-id="095be-138">次の表に、エンドポイント作成フォームに記入する方法についてのガイダンスを示します。</span><span class="sxs-lookup"><span data-stu-id="095be-138">The following table provides guidance on how to fill out the endpoint creation form:</span></span>

<span data-ttu-id="095be-139">**Field**</span><span class="sxs-lookup"><span data-stu-id="095be-139">**Field**</span></span> | <span data-ttu-id="095be-140">**説明**</span><span class="sxs-lookup"><span data-stu-id="095be-140">**Description**</span></span> | <span data-ttu-id="095be-141">**推奨値**</span><span class="sxs-lookup"><span data-stu-id="095be-141">**Recommended Value**</span></span>
--- | --- | ---
<span data-ttu-id="095be-142">Name</span><span class="sxs-lookup"><span data-stu-id="095be-142">Name</span></span> | <span data-ttu-id="095be-143">この一意の値は、OAuth アクセスを必要とするアプリケーションを識別します。</span><span class="sxs-lookup"><span data-stu-id="095be-143">This unique value identifies the application that you require OAuth access for.</span></span> | <span data-ttu-id="095be-144">Microsoft Search</span><span class="sxs-lookup"><span data-stu-id="095be-144">Microsoft Search</span></span>
<span data-ttu-id="095be-145">クライアント ID</span><span class="sxs-lookup"><span data-stu-id="095be-145">Client ID</span></span> | <span data-ttu-id="095be-146">読み取り専用で、自動生成されたアプリケーションの一意の ID。</span><span class="sxs-lookup"><span data-stu-id="095be-146">A read-only, auto-generated unique ID for the application.</span></span> <span data-ttu-id="095be-147">このインスタンスは、アクセストークンを要求するときにクライアント ID を使用します。</span><span class="sxs-lookup"><span data-stu-id="095be-147">The instance uses the client ID when it requests an access token.</span></span> | <span data-ttu-id="095be-148">該当なし</span><span class="sxs-lookup"><span data-stu-id="095be-148">NA</span></span>
<span data-ttu-id="095be-149">クライアントシークレット</span><span class="sxs-lookup"><span data-stu-id="095be-149">Client secret</span></span> | <span data-ttu-id="095be-150">この共有シークレット文字列を使用すると、ServiceNow インスタンスと Microsoft Search は相互に通信を承認します。</span><span class="sxs-lookup"><span data-stu-id="095be-150">With this shared secret string, the ServiceNow instance and Microsoft Search authorize communications with each other.</span></span> | <span data-ttu-id="095be-151">これをパスワードとして扱うことにより、セキュリティのベストプラクティスに従います。</span><span class="sxs-lookup"><span data-stu-id="095be-151">Follow security best-practices by treating this as a password.</span></span>
<span data-ttu-id="095be-152">リダイレクト URL</span><span class="sxs-lookup"><span data-stu-id="095be-152">Redirect URL</span></span> | <span data-ttu-id="095be-153">承認サーバーのリダイレクト先となる必要なコールバック URL。</span><span class="sxs-lookup"><span data-stu-id="095be-153">A required callback URL that the authorization server redirects to.</span></span> | https://gcs.office.com/v1.0/admin/oauth/callback
<span data-ttu-id="095be-154">ロゴの URL</span><span class="sxs-lookup"><span data-stu-id="095be-154">Logo URL</span></span> | <span data-ttu-id="095be-155">アプリケーションロゴのイメージを含む URL。</span><span class="sxs-lookup"><span data-stu-id="095be-155">A URL that contains the image for the application logo.</span></span> | <span data-ttu-id="095be-156">該当なし</span><span class="sxs-lookup"><span data-stu-id="095be-156">NA</span></span>
<span data-ttu-id="095be-157">Active</span><span class="sxs-lookup"><span data-stu-id="095be-157">Active</span></span> | <span data-ttu-id="095be-158">アプリケーションレジストリをアクティブにするには、チェックボックスをオンにします。</span><span class="sxs-lookup"><span data-stu-id="095be-158">Select the check box to make the application registry active.</span></span> | <span data-ttu-id="095be-159">Active に設定</span><span class="sxs-lookup"><span data-stu-id="095be-159">Set to active</span></span>
<span data-ttu-id="095be-160">トークンの寿命を更新する</span><span class="sxs-lookup"><span data-stu-id="095be-160">Refresh token lifespan</span></span> | <span data-ttu-id="095be-161">更新トークンが有効になる秒数。</span><span class="sxs-lookup"><span data-stu-id="095be-161">The number of seconds that a refresh token is valid.</span></span> <span data-ttu-id="095be-162">既定では、更新トークンの有効期限は100日 (864万秒) です。</span><span class="sxs-lookup"><span data-stu-id="095be-162">By default, refresh tokens expire in 100 days (8640000 seconds).</span></span> | <span data-ttu-id="095be-163">31536000 (1 年)</span><span class="sxs-lookup"><span data-stu-id="095be-163">31,536,000 (1 year)</span></span>
<span data-ttu-id="095be-164">アクセストークンの寿命</span><span class="sxs-lookup"><span data-stu-id="095be-164">Access token lifespan</span></span> | <span data-ttu-id="095be-165">アクセストークンの有効期間 (秒数)。</span><span class="sxs-lookup"><span data-stu-id="095be-165">The number of seconds that an access token is valid.</span></span> | <span data-ttu-id="095be-166">43200 (12 時間)</span><span class="sxs-lookup"><span data-stu-id="095be-166">43,200 (12 hours)</span></span>

<span data-ttu-id="095be-167">クライアント id とクライアントシークレットを入力して、インスタンスに接続します。</span><span class="sxs-lookup"><span data-stu-id="095be-167">Enter the client id and client secret to connect to your instance.</span></span> <span data-ttu-id="095be-168">接続した後、ServiceNow アカウントの資格情報を使用して、クロールするためのアクセス許可を認証します。</span><span class="sxs-lookup"><span data-stu-id="095be-168">After connecting, use a ServiceNow account credential to authenticate permission to crawl.</span></span> <span data-ttu-id="095be-169">少なくとも、このアカウントは **ナレッジ** の役割を持っている必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-169">The account should at least have **knowledge** role.</span></span>

#### <a name="azure-ad-openid-connect"></a><span data-ttu-id="095be-170">Azure AD OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="095be-170">Azure AD OpenID Connect</span></span>

<span data-ttu-id="095be-171">Azure AD OpenID Connect を認証に使用するには、次の手順を実行します。</span><span class="sxs-lookup"><span data-stu-id="095be-171">To use Azure AD OpenID Connect for authentication, follow the steps below.</span></span>

###### <a name="step-1-register-a-new-application-in-azure-active-directory"></a><span data-ttu-id="095be-172">手順 1: Azure Active Directory に新しいアプリケーションを登録する</span><span class="sxs-lookup"><span data-stu-id="095be-172">Step 1: Register a new application in Azure Active Directory</span></span>

<span data-ttu-id="095be-173">Azure Active Directory に新しいアプリケーションを登録する方法については、「 [アプリケーションを登録](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#register-an-application)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-173">To learn about registering a new application in Azure Active Directory, see [Register an application](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#register-an-application).</span></span> <span data-ttu-id="095be-174">[単一テナントの組織ディレクトリ] を選択します。</span><span class="sxs-lookup"><span data-stu-id="095be-174">Select single tenant organizational directory.</span></span> <span data-ttu-id="095be-175">リダイレクト URI は必要ありません。</span><span class="sxs-lookup"><span data-stu-id="095be-175">Redirect URI is not needed.</span></span> <span data-ttu-id="095be-176">登録後、アプリケーション (クライアント) ID とディレクトリ (テナント) ID を書き留めます。</span><span class="sxs-lookup"><span data-stu-id="095be-176">After registration, note down the Application (client) ID and Directory (tenant) ID.</span></span>

###### <a name="step-2-create-a-client-secret"></a><span data-ttu-id="095be-177">手順 2: クライアントシークレットを作成する</span><span class="sxs-lookup"><span data-stu-id="095be-177">Step 2: Create a client secret</span></span>

<span data-ttu-id="095be-178">クライアントシークレットを作成する方法については、「 [クライアントシークレットの作成](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#add-a-client-secret)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-178">To learn about creating a client secret, see [Creating a client secret](https://docs.microsoft.com/azure/active-directory/develop/quickstart-register-app#add-a-client-secret).</span></span> <span data-ttu-id="095be-179">クライアントシークレットをメモします。</span><span class="sxs-lookup"><span data-stu-id="095be-179">Take a note of client secret.</span></span>

###### <a name="step-3-retrieve-service-principal-object-identifier"></a><span data-ttu-id="095be-180">手順 3: サービスプリンシパルオブジェクト識別子を取得する</span><span class="sxs-lookup"><span data-stu-id="095be-180">Step 3: Retrieve Service Principal Object Identifier</span></span>

<span data-ttu-id="095be-181">手順に従ってサービスプリンシパルオブジェクト識別子を取得する</span><span class="sxs-lookup"><span data-stu-id="095be-181">Follow the steps to retrieve Service Principal Object Identifier</span></span>

1. <span data-ttu-id="095be-182">PowerShell を実行する</span><span class="sxs-lookup"><span data-stu-id="095be-182">Run PowerShell</span></span>
2. <span data-ttu-id="095be-183">次のコマンドを使用して Azure PowerShell をインストールする</span><span class="sxs-lookup"><span data-stu-id="095be-183">Install Azure PowerShell using the following command</span></span>
```<language>
   Install-Module -Name Az -AllowClobber -Scope CurrentUser
```
3. <span data-ttu-id="095be-184">Azure への接続</span><span class="sxs-lookup"><span data-stu-id="095be-184">Connect to Azure</span></span>
```<language>
    Connect-AzAccount
```
4. <span data-ttu-id="095be-185">サービスプリンシパルオブジェクト識別子を取得する</span><span class="sxs-lookup"><span data-stu-id="095be-185">Get Service Principal Object Identifier</span></span>
```<language>
   Get-AzADServicePrincipal -ApplicationId "Application-ID"
```
<span data-ttu-id="095be-186">手順1で登録したアプリケーションの "アプリケーション ID" を (引用符を除く) アプリケーション (クライアント) ID に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="095be-186">Replace "Application-ID" with Application (client) ID (without quotes) of the application you registered in step 1.</span></span> <span data-ttu-id="095be-187">PowerShell 出力からの ID オブジェクトの値に注意してください。</span><span class="sxs-lookup"><span data-stu-id="095be-187">Note the value of ID object from PowerShell output.</span></span> <span data-ttu-id="095be-188">これは、サービスプリンシパル ID です。</span><span class="sxs-lookup"><span data-stu-id="095be-188">It is the Service Principal ID.</span></span>

<span data-ttu-id="095be-189">これで、Azure portal から必要な情報がすべて得られました。</span><span class="sxs-lookup"><span data-stu-id="095be-189">Now you have all the information required from Azure portal.</span></span> <span data-ttu-id="095be-190">情報の簡単な概要については、以下の表で説明します。</span><span class="sxs-lookup"><span data-stu-id="095be-190">A quick summary of the information is given in the table below.</span></span>

<span data-ttu-id="095be-191">**プロパティ**</span><span class="sxs-lookup"><span data-stu-id="095be-191">**Property**</span></span> | <span data-ttu-id="095be-192">**説明**</span><span class="sxs-lookup"><span data-stu-id="095be-192">**Description**</span></span>
--- | ---
<span data-ttu-id="095be-193">ディレクトリ ID (テナント ID)</span><span class="sxs-lookup"><span data-stu-id="095be-193">Directory ID (Tenant ID)</span></span> | <span data-ttu-id="095be-194">これは、Azure Active Directory テナントを参照する一意の ID です (手順1を参照)。</span><span class="sxs-lookup"><span data-stu-id="095be-194">This is a unique ID referring the Azure Active Directory tenant (from step 1).</span></span>
<span data-ttu-id="095be-195">アプリケーション ID (クライアント ID)</span><span class="sxs-lookup"><span data-stu-id="095be-195">Application ID (Client ID)</span></span> | <span data-ttu-id="095be-196">これは、手順1で登録したアプリケーションを参照する一意の ID です。</span><span class="sxs-lookup"><span data-stu-id="095be-196">This is a unique ID referring the application registered in step 1.</span></span>
<span data-ttu-id="095be-197">クライアントの秘密情報</span><span class="sxs-lookup"><span data-stu-id="095be-197">Client Secret</span></span> | <span data-ttu-id="095be-198">これは、(手順2から) アプリケーションの秘密キーです。</span><span class="sxs-lookup"><span data-stu-id="095be-198">This is the secret key of the application (from step 2).</span></span> <span data-ttu-id="095be-199">パスワードと同じように扱います。</span><span class="sxs-lookup"><span data-stu-id="095be-199">Treat it like a password.</span></span>
<span data-ttu-id="095be-200">サービスプリンシパル ID</span><span class="sxs-lookup"><span data-stu-id="095be-200">Service Principal ID</span></span> | <span data-ttu-id="095be-201">サービスとして実行されているアプリケーションの id。</span><span class="sxs-lookup"><span data-stu-id="095be-201">An identity for the application running as a service.</span></span> <span data-ttu-id="095be-202">(手順 3)</span><span class="sxs-lookup"><span data-stu-id="095be-202">(from step 3)</span></span>

###### <a name="step-4-register-servicenow-application"></a><span data-ttu-id="095be-203">手順 4: ServiceNow アプリケーションを登録する</span><span class="sxs-lookup"><span data-stu-id="095be-203">Step 4: Register ServiceNow Application</span></span>

<span data-ttu-id="095be-204">ServiceNow インスタンスでは、次の構成を行う必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-204">The following configuration need to be done in the ServiceNow instance.</span></span>

1. <span data-ttu-id="095be-205">新しい OAuth OIDC エンティティを登録します。</span><span class="sxs-lookup"><span data-stu-id="095be-205">Register a new OAuth OIDC entity.</span></span> <span data-ttu-id="095be-206">詳細については、「 [Create An OAuth OIDC provider](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-206">To learn, see [Create an OAuth OIDC provider](https://docs.servicenow.com/bundle/orlando-platform-administration/page/administer/security/task/add-OIDC-entity.html).</span></span>
2. <span data-ttu-id="095be-207">次の表では、OIDC プロバイダ登録フォームに記入する方法についてのガイダンスを示します。</span><span class="sxs-lookup"><span data-stu-id="095be-207">The following table provides guidance on how to fill out OIDC provider registration form</span></span>

<span data-ttu-id="095be-208">**Field**</span><span class="sxs-lookup"><span data-stu-id="095be-208">**Field**</span></span> | <span data-ttu-id="095be-209">**説明**</span><span class="sxs-lookup"><span data-stu-id="095be-209">**Description**</span></span> | <span data-ttu-id="095be-210">**推奨値**</span><span class="sxs-lookup"><span data-stu-id="095be-210">**Recommended Value**</span></span>
--- | --- | ---
<span data-ttu-id="095be-211">Name</span><span class="sxs-lookup"><span data-stu-id="095be-211">Name</span></span> | <span data-ttu-id="095be-212">OAuth OIDC エンティティを識別する一意の名前。</span><span class="sxs-lookup"><span data-stu-id="095be-212">A unique name that identifies the OAuth OIDC entity.</span></span> | <span data-ttu-id="095be-213">Azure AD</span><span class="sxs-lookup"><span data-stu-id="095be-213">Azure AD</span></span>
<span data-ttu-id="095be-214">クライアント ID</span><span class="sxs-lookup"><span data-stu-id="095be-214">Client ID</span></span> | <span data-ttu-id="095be-215">サードパーティの OAuth OIDC サーバーに登録されているアプリケーションのクライアント ID。</span><span class="sxs-lookup"><span data-stu-id="095be-215">The client ID of the application registered in the third-party OAuth OIDC server.</span></span> <span data-ttu-id="095be-216">このインスタンスは、アクセストークンを要求するときにクライアント ID を使用します。</span><span class="sxs-lookup"><span data-stu-id="095be-216">The instance uses the client ID when requesting an access token.</span></span> | <span data-ttu-id="095be-217">手順1のアプリケーション (クライアント) ID</span><span class="sxs-lookup"><span data-stu-id="095be-217">Application (Client) ID from step 1</span></span>
<span data-ttu-id="095be-218">クライアントの秘密情報</span><span class="sxs-lookup"><span data-stu-id="095be-218">Client Secret</span></span> | <span data-ttu-id="095be-219">サードパーティの OAuth OIDC サーバーに登録されているアプリケーションのクライアントシークレット。</span><span class="sxs-lookup"><span data-stu-id="095be-219">The client secret of the application registered in the third-party OAuth OIDC server.</span></span> | <span data-ttu-id="095be-220">手順2のクライアントシークレット</span><span class="sxs-lookup"><span data-stu-id="095be-220">Client Secret from step 2</span></span>

<span data-ttu-id="095be-221">その他の値はすべて既定値にすることができます。</span><span class="sxs-lookup"><span data-stu-id="095be-221">All other values can be default.</span></span>

3. <span data-ttu-id="095be-222">OIDC プロバイダ登録フォームで、新しい OIDC プロバイダ構成を追加する必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-222">In the OIDC provider registration form, you need to add a new OIDC provider configuration.</span></span> <span data-ttu-id="095be-223">*OAUTH Oidc プロバイダ構成* フィールドに対して [検索] アイコンをクリックして、oidc 構成のレコードを開きます。</span><span class="sxs-lookup"><span data-stu-id="095be-223">Click the search icon against *OAuth OIDC Provider Configuration* field to open the records of OIDC configurations.</span></span> <span data-ttu-id="095be-224">[新規作成] をクリックします。</span><span class="sxs-lookup"><span data-stu-id="095be-224">Click New.</span></span>
4. <span data-ttu-id="095be-225">次の表では、OIDC プロバイダ構成フォームに記入する方法についてのガイダンスを示します。</span><span class="sxs-lookup"><span data-stu-id="095be-225">The following table provides guidance on how to fill out OIDC provider configuration form</span></span>

<span data-ttu-id="095be-226">**Field**</span><span class="sxs-lookup"><span data-stu-id="095be-226">**Field**</span></span> | <span data-ttu-id="095be-227">**推奨値**</span><span class="sxs-lookup"><span data-stu-id="095be-227">**Recommended Value**</span></span>
--- | ---
<span data-ttu-id="095be-228">OIDC プロバイダ</span><span class="sxs-lookup"><span data-stu-id="095be-228">OIDC Provider</span></span> |  <span data-ttu-id="095be-229">Azure AD</span><span class="sxs-lookup"><span data-stu-id="095be-229">Azure AD</span></span>
<span data-ttu-id="095be-230">OIDC メタデータの URL</span><span class="sxs-lookup"><span data-stu-id="095be-230">OIDC Metadata URL</span></span> | <span data-ttu-id="095be-231">これは https \: //login.microsoftonline.com/"/.well-known/openid-configuration" という形式でなければなりません。</span><span class="sxs-lookup"><span data-stu-id="095be-231">This must be in the form https\://login.microsoftonline.com/"tenandId"/.well-known/openid-configuration</span></span> <br/><span data-ttu-id="095be-232">手順 1 (引用符なし) の "tenantID" をディレクトリ (テナント) ID に置き換えます。</span><span class="sxs-lookup"><span data-stu-id="095be-232">Replace "tenantID" with Directory (tenant) ID from step 1 (without quotes).</span></span>
<span data-ttu-id="095be-233">OIDC 構成キャッシュの有効期間</span><span class="sxs-lookup"><span data-stu-id="095be-233">OIDC Configuration Cache Life Span</span></span> |  <span data-ttu-id="095be-234">120</span><span class="sxs-lookup"><span data-stu-id="095be-234">120</span></span>
<span data-ttu-id="095be-235">アプリケーション</span><span class="sxs-lookup"><span data-stu-id="095be-235">Application</span></span> | <span data-ttu-id="095be-236">グローバル</span><span class="sxs-lookup"><span data-stu-id="095be-236">Global</span></span>
<span data-ttu-id="095be-237">ユーザー要求</span><span class="sxs-lookup"><span data-stu-id="095be-237">User Claim</span></span> | <span data-ttu-id="095be-238">sub</span><span class="sxs-lookup"><span data-stu-id="095be-238">sub</span></span>
<span data-ttu-id="095be-239">ユーザーフィールド</span><span class="sxs-lookup"><span data-stu-id="095be-239">User Field</span></span> | <span data-ttu-id="095be-240">ユーザー ID</span><span class="sxs-lookup"><span data-stu-id="095be-240">User ID</span></span>
<span data-ttu-id="095be-241">JTI クレーム検証を有効にする</span><span class="sxs-lookup"><span data-stu-id="095be-241">Enable JTI claim verification</span></span> | <span data-ttu-id="095be-242">無効</span><span class="sxs-lookup"><span data-stu-id="095be-242">Disabled</span></span>

5. <span data-ttu-id="095be-243">[Submit and Update OAuth OIDC Entity] フォームをクリックします。</span><span class="sxs-lookup"><span data-stu-id="095be-243">Click Submit and Update the OAuth OIDC Entity form.</span></span>

###### <a name="step-5-create-a-servicenow-account"></a><span data-ttu-id="095be-244">手順 5: ServiceNow アカウントを作成する</span><span class="sxs-lookup"><span data-stu-id="095be-244">Step 5: Create a ServiceNow account</span></span>

<span data-ttu-id="095be-245">ServiceNow アカウントを作成する手順を参照し、 [servicenow でユーザーを作成](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html)します。</span><span class="sxs-lookup"><span data-stu-id="095be-245">Refer the instructions to create a ServiceNow account, [create a user in ServiceNow](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_CreateAUser.html).</span></span>

<span data-ttu-id="095be-246">次の表に、ServiceNow ユーザーアカウント登録に記入する方法についてのガイダンスを示します。</span><span class="sxs-lookup"><span data-stu-id="095be-246">The following table provides guidance on how to fill out the ServiceNow user account registration</span></span>

<span data-ttu-id="095be-247">**Field**</span><span class="sxs-lookup"><span data-stu-id="095be-247">**Field**</span></span> | <span data-ttu-id="095be-248">**推奨値**</span><span class="sxs-lookup"><span data-stu-id="095be-248">**Recommended Value**</span></span>
--- | ---
<span data-ttu-id="095be-249">ユーザー ID</span><span class="sxs-lookup"><span data-stu-id="095be-249">User ID</span></span> | <span data-ttu-id="095be-250">手順3のサービスプリンシパル ID</span><span class="sxs-lookup"><span data-stu-id="095be-250">Service Principal ID from step 3</span></span>
<span data-ttu-id="095be-251">Web サービスのアクセスのみ</span><span class="sxs-lookup"><span data-stu-id="095be-251">Web service access only</span></span> | <span data-ttu-id="095be-252">Checked</span><span class="sxs-lookup"><span data-stu-id="095be-252">Checked</span></span>

<span data-ttu-id="095be-253">その他の値は、すべて既定のままにしておくことができます。</span><span class="sxs-lookup"><span data-stu-id="095be-253">All other values can be left to default.</span></span>

###### <a name="step-6-enable-knowledge-role-for-the-servicenow-account"></a><span data-ttu-id="095be-254">手順 6: ServiceNow アカウントのナレッジロールを有効にする</span><span class="sxs-lookup"><span data-stu-id="095be-254">Step 6: Enable Knowledge role for the ServiceNow account</span></span>

<span data-ttu-id="095be-255">ServiceNow プリンシパル ID を使用して作成した ServiceNow アカウントにユーザー ID としてアクセスし、ナレッジの役割を割り当てます。</span><span class="sxs-lookup"><span data-stu-id="095be-255">Access the ServiceNow account you created with ServiceNow Principal ID as User ID and assign the knowledge role.</span></span> <span data-ttu-id="095be-256">ServiceNow アカウントに役割を割り当てる手順については、「 [ユーザーに役割を割り当てる](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-256">Instructions to assigning a role to a ServiceNow account can be found here, [assign a role to a user](https://docs.servicenow.com/bundle/paris-platform-administration/page/administer/users-and-groups/task/t_AssignARoleToAUser.html).</span></span>

<span data-ttu-id="095be-257">管理センター構成ウィザードのクライアント ID (手順 1) とクライアントシークレット (手順 2) を使用して、Azure AD OpenID Connect を使用して ServiceNow インスタンスを認証します。</span><span class="sxs-lookup"><span data-stu-id="095be-257">Use Application ID as Client ID (from step 1), and Client secret (from step 2) in admin center configuration wizard to authenticate to your ServiceNow instance using Azure AD OpenID Connect.</span></span>

## <a name="filter-data"></a><span data-ttu-id="095be-258">データをフィルター処理する</span><span class="sxs-lookup"><span data-stu-id="095be-258">Filter data</span></span>

<span data-ttu-id="095be-259">ServiceNow クエリ文字列を使用すると、記事を同期するための条件を指定できます。</span><span class="sxs-lookup"><span data-stu-id="095be-259">With a ServiceNow query string, you can specify conditions for syncing articles.</span></span> <span data-ttu-id="095be-260">**SQL Select** ステートメントの **where** 句のようになります。</span><span class="sxs-lookup"><span data-stu-id="095be-260">It's like a **Where** clause in a **SQL Select** statement.</span></span> <span data-ttu-id="095be-261">たとえば、公開されていてアクティブな記事のみにインデックスを作成することを選択できます。</span><span class="sxs-lookup"><span data-stu-id="095be-261">For example, you can choose to index only articles that are published and active.</span></span> <span data-ttu-id="095be-262">独自のクエリ文字列を作成する方法については、「 [フィルターを使用してエンコードされたクエリ文字列を生成](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-262">To learn about creating your own query string, see [Generate an encoded query string using a filter](https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/using-lists/task/t_GenEncodQueryStringFilter.html).</span></span>

## <a name="manage-search-permissions"></a><span data-ttu-id="095be-263">検索アクセス許可を管理する</span><span class="sxs-lookup"><span data-stu-id="095be-263">Manage search permissions</span></span>

<span data-ttu-id="095be-264">ServiceNow コネクタは、 **すべてのユーザー** に表示される検索権限、または **このデータソースへのアクセス権を持つユーザーのみ** をサポートします。</span><span class="sxs-lookup"><span data-stu-id="095be-264">The ServiceNow connector supports search permissions visible to **Everyone** or **Only people with access to this data source**.</span></span> <span data-ttu-id="095be-265">インデックス付きデータが検索結果に表示され、組織内のすべてのユーザー、またはそれぞれにアクセス権を持つユーザーに対して表示されます。</span><span class="sxs-lookup"><span data-stu-id="095be-265">Indexed data appears in the search results and is visible to all users in the organization or users who have access to them respectively.</span></span> <span data-ttu-id="095be-266">ServiceNow コネクタは、高度なスクリプトを使用せずに、既定のユーザー条件のアクセス許可をサポートします。</span><span class="sxs-lookup"><span data-stu-id="095be-266">ServiceNow Connector supports default user criteria permissions without advanced scripts.</span></span> <span data-ttu-id="095be-267">コネクタが高度なスクリプトを使用してユーザーの条件を検出すると、そのユーザーの条件を使用するすべてのデータが検索結果に表示されなくなります。</span><span class="sxs-lookup"><span data-stu-id="095be-267">When the connector encounters a user criteria with advanced script, all data using that user criteria will not be showed in search results.</span></span>

<span data-ttu-id="095be-268">**このデータソースへのアクセス権を持つユーザーのみ** を選択する場合は、ServiceNow インスタンスに Azure Active DIRECTORY (AAD) プロビジョニングされたユーザーまたは aad 以外のユーザーがあるかどうかをさらに選択する必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-268">If you choose **Only people with access to this data source**, you need to further choose whether your ServiceNow instance has Azure Active Directory (AAD) provisioned users or Non-AAD users.</span></span>

>[!NOTE]
><span data-ttu-id="095be-269">アイデンティティソースの種類として AAD を選択する場合は、[ServiceNow] の [対象ユーザー] プロパティに UPN source プロパティを割り当てていることを確認してください。</span><span class="sxs-lookup"><span data-stu-id="095be-269">If you choose AAD as the type of identity source, make sure you are assigning UPN source property to email targeted property in ServiceNow.</span></span> <span data-ttu-id="095be-270">マッピングを確認または変更するには、「 [Azure Active Directory での SaaS アプリケーションのユーザープロビジョニング属性のカスタマイズ](https://docs.microsoft.com/azure/active-directory/app-provisioning/customize-application-attributes)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-270">To verify or change your mappings, see [Customizing user provisioning attribute-mappings for SaaS applications in Azure Active Directory](https://docs.microsoft.com/azure/active-directory/app-provisioning/customize-application-attributes).</span></span>

<span data-ttu-id="095be-271">ServiceNow インスタンスから ACL を取り込み、id の種類として "非 AAD" を選択した場合は、id のマッピングの手順について「 [非 AZURE AD id をマップ](map-non-aad.md) する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-271">If you chose to ingest an ACL from your ServiceNow instance and selected "non-AAD" for the identity type see [Map your non-Azure AD Identities](map-non-aad.md) for instructions on mapping the identities.</span></span>

## <a name="assign-property-labels"></a><span data-ttu-id="095be-272">プロパティのラベルを割り当てる</span><span class="sxs-lookup"><span data-stu-id="095be-272">Assign property labels</span></span>

<span data-ttu-id="095be-273">各ラベルに source プロパティを割り当てるには、オプションのメニューから選択します。</span><span class="sxs-lookup"><span data-stu-id="095be-273">You can assign a source property to each label by choosing from a menu of options.</span></span> <span data-ttu-id="095be-274">この手順は必須ではありませんが、いくつかのプロパティラベルを使用することで、検索の関連性が向上し、エンドユーザーの検索結果がより正確になります。</span><span class="sxs-lookup"><span data-stu-id="095be-274">While this step is not mandatory, having some property labels will improve the search relevance and ensure more accurate search results for end users.</span></span>

## <a name="manage-schema"></a><span data-ttu-id="095be-275">スキーマを管理する</span><span class="sxs-lookup"><span data-stu-id="095be-275">Manage schema</span></span>

<span data-ttu-id="095be-276">[**スキーマの管理**] 画面で、プロパティに関連付けられているスキーマの属性 (**クエリ** 可能、**検索\*\*\*\*可能、取得可能、および\*\*\*\*絞り込み可能な**) を変更し、オプションのエイリアスを追加して、 **Content** プロパティを選択することができます。</span><span class="sxs-lookup"><span data-stu-id="095be-276">On the **Manage Schema** screen, you have the option to change the schema attributes (**queryable**, **searchable**, **retrievable**, and **refinable**) associated with the properties, add optional aliases, and choose the **Content** property.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="095be-277">更新スケジュールを設定する</span><span class="sxs-lookup"><span data-stu-id="095be-277">Set the refresh schedule</span></span>

<span data-ttu-id="095be-278">ServiceNow コネクタは、フルクロールと増分クロールの両方の更新スケジュールをサポートします。</span><span class="sxs-lookup"><span data-stu-id="095be-278">The ServiceNow connector supports refresh schedules for both full and incremental crawls.</span></span> <span data-ttu-id="095be-279">両方を設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="095be-279">We recommend that you set both.</span></span>

<span data-ttu-id="095be-280">フルクロールスケジュールは、Microsoft 検索インデックスと同期フィルターから移動したすべての記事に対して以前に同期された削除済み記事を検索します。</span><span class="sxs-lookup"><span data-stu-id="095be-280">A full crawl schedule finds deleted articles that were previously synced to the Microsoft Search index and any articles that moved out of the sync filter.</span></span> <span data-ttu-id="095be-281">最初に ServiceNow に接続すると、フルクロールが実行され、すべてのナレッジベースの記事が同期されます。</span><span class="sxs-lookup"><span data-stu-id="095be-281">When you first connect to ServiceNow, a full crawl runs to sync all the knowledge-base articles.</span></span> <span data-ttu-id="095be-282">新しいアイテムを同期し、更新を行うには、増分クロールをスケジュールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-282">To sync new items and make updates, you need to schedule incremental crawls.</span></span>

<span data-ttu-id="095be-283">推奨される既定値は、フルクロールの場合は1日、増分クロールの場合は4時間です。</span><span class="sxs-lookup"><span data-stu-id="095be-283">The recommended default is one day for a full crawl and four hours for an incremental crawl.</span></span>
>[!NOTE]
><span data-ttu-id="095be-284">Id の場合は、フルクロールのスケジュールのみが適用されます。</span><span class="sxs-lookup"><span data-stu-id="095be-284">For identities, only full crawl scheduled will be applied.</span></span>

## <a name="review-and-publish"></a><span data-ttu-id="095be-285">レビューと発行</span><span class="sxs-lookup"><span data-stu-id="095be-285">Review and publish</span></span>

<span data-ttu-id="095be-286">コネクタを構成した後、接続を確認して発行することができます。</span><span class="sxs-lookup"><span data-stu-id="095be-286">After you configure your connector, you can review and publish the connection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="095be-287">次の手順</span><span class="sxs-lookup"><span data-stu-id="095be-287">Next steps</span></span>

<span data-ttu-id="095be-288">接続を公開した後、[検索結果] ページをカスタマイズする必要があります。</span><span class="sxs-lookup"><span data-stu-id="095be-288">After publishing the connection, you need to customize the search results page.</span></span> <span data-ttu-id="095be-289">検索結果のカスタマイズについては、「 [検索結果ページをカスタマイズ](https://docs.microsoft.com/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page)する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="095be-289">To learn about customizing search results, see [Customize the search results page](https://docs.microsoft.com/microsoftsearch/configure-connector#next-steps-customize-the-search-results-page).</span></span>