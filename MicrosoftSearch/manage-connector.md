---
title: Microsoft 検索用の Microsoft Graph コネクタを管理する
ms.author: monaray
author: monaray97
manager: mnirkhe
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Microsoft 検索用の Microsoft Graph コネクタを管理します。
ms.openlocfilehash: a9b3feff3a5c289fef3f5091518d074970209b9d
ms.sourcegitcommit: 59cdd3f0f82b7918399bf44d27d9891076090f4f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/20/2020
ms.locfileid: "49367678"
---
<!-- markdownlint-disable no-inline-html -->

# <a name="manage-your-connections-for-microsoft-search"></a>Microsoft Search の接続を管理する

コネクタにアクセスして管理するには、テナントの検索管理者として指定する必要があります。 テナント管理者に連絡して、検索管理者ロールのプロビジョニングを行います。

## <a name="get-started"></a>概要

[Microsoft 365 管理センター](https://admin.microsoft.com)の [[コネクタ] タブ](https://admin.microsoft.com/Adminportal/Home#/MicrosoftSearch/Connectors)に移動します。

各コネクタの種類について、 [Microsoft 365 管理センター](https://admin.microsoft.com) は次の表に示す操作をサポートしています。

Operation | Microsoft が構築したコネクタ | パートナーまたはカスタム作成コネクタ
--- | --- | ---
接続を追加する | : heavy_check_mark: ( [Microsoft が作成したコネクタを構成するを](configure-connector.md)参照) | : x: (パートナーまたはカスタム構築コネクタ管理者 UX を参照してください)
接続を削除する | :heavy_check_mark: | :heavy_check_mark:
公開された接続を編集する | : heavy_check_mark: Name<br></br> : heavy_check_mark: Description<br></br> : heavy_check_mark: 外部データソースの認証資格情報<br></br> : heavy_check_mark: オンプレミスのデータソースのゲートウェイ資格情報<br></br> : heavy_check_mark: 更新スケジュール<br></br> | : heavy_check_mark: Name<br></br> : heavy_check_mark: Description
下書き接続を編集する | :heavy_check_mark: | :x:

## <a name="monitor-your-connection-status"></a>接続の状態を監視する

接続を作成すると、[ **Microsoft Search** ] ページの [**コネクタ**] タブに、処理されたアイテムの数が表示されます。 最初のフルクロールが正常に完了すると、定期的な増分クロールの進行状況が表示されます。 このページでは、コネクタの毎日の操作に関する情報と、ログおよびエラー履歴の概要を提供します。

各接続に対して、[ **状態** ] 列に4つの状態が表示されます。

* **同期** します。 コネクタは、ソースからデータをクロールして、既存のアイテムのインデックスを作成し、更新を行います。

* **Enabled**: 接続が有効になっていますが、アクティブなクロールが実行されていません。 **最終同期時刻** は、最後に成功したクロールがいつ発生したかを示します。 この接続は、最後の同期時刻と同じになります。

* **一時停止** します。 クロールは、[一時停止] オプションを使用して管理者によって一時停止されます。 次のクロールは、手動で再開した場合にのみ実行されます。 ただし、この接続からのデータは引き続き検索できます。

* **失敗**。 接続で重大なエラーが発生しました。 このエラーには手動での介入が必要です。 表示されるエラーメッセージに基づいて、管理者は適切なアクションを実行する必要があります。 エラーが発生するまでにインデックスが作成されたデータは検索可能になります。

### <a name="view-your-last-crawl-info"></a>前回のクロール情報を表示する

最初の増分またはフルクロールが正常に完了すると、最後のクロールデータの値が詳細ウィンドウの最後のクロールヘッダーの下に表示されます。 前回のクロールが実行されていない場合は、最後のクロールヘッダーの下に情報は表示されません。 前回のクロールに関する情報は、クロールの実行方法についての洞察を得たり、必要な場所で必要な手順を実行したりするのに役立ちます。

次の最後のクロール値が各接続で使用可能になります。

値 | 説明
--- | ---
完了日時 | 前回のクロールが完了した日付と時刻
種類 | 増分またはフルクロール
期間 | 前回のクロールが完了するまでにかかった時間
成功 | 前回のクロールで正常に取り込まれたされたアイテムの数
エラー | 前回のクロールで間違ったアイテムの数

### <a name="monitor-errors"></a>エラーを監視する

[**コネクタ**] タブ上の **アクティブな各コネクタ** について、既存のクロールエラーが [**エラー** ] タブに表示されます。タブには、エラーコード、各数、およびエラーログのダウンロードオプションが一覧表示されます。 次の画像の例を参照してください。 エラー **コード** を選択して、エラーの詳細を表示します。

![コネクタが選択されていて、このコネクタの3つのエラーを示す詳細ウィンドウがあるコネクタリスト。](media/errormonitoring1.png)

エラーの具体的な詳細を表示するには、エラーコードを選択します。 エラーの詳細とリンクを含む画面が表示されます。 最新のエラーが一番上に表示されます。 次の表の例を参照してください。

![コネクタが選択された状態で、コネクタのエラーの一覧が表示されている詳細ウィンドウを含むコネクタリスト。](media/errormonitoring2.png)

任意の接続に対して表示できるさまざまなエラーの一覧を次に示します。 これらの解決方法が機能しない場合は、サポートに問い合わせるか、 [フィードバック](connectors-feedback.md)を送信してください。

エラー コード | エラー メッセージ | ソリューション
--- | --- | ---
1000 | データソースを使用できません。 インターネット接続を確認するか、コネクタでデータソースにアクセスできることを確認してください。 | このエラーは、ネットワークの問題が原因でデータソースに到達できない場合、またはデータソース自体が削除、移動、または名前変更された場合に発生します。 指定したデータソースの詳細が有効であるかどうかを確認します。
1001 | データソースがコネクタを調整しているため、データを更新できません。 | データソースのスロットルを停止するには、そのサイズ制限を増やすことができるかどうか、またはその日のトラフィックが少ない状態になるまで待機するかどうかを確認します。
1002 | データソースを使用して認証できません。 このデータソースに関連付けられている資格情報が正しいことを確認します。 | [ **編集** ] をクリックして、認証資格情報を更新します。
1003 | コネクタに関連付けられているアカウントには、アイテムにアクセスする権限がありません。 |  インデックスを作成するアイテムに適切なアカウントがアクセスできることを確認します。
1004 | オンプレミスのデータゲートウェイに到達できません。 ゲートウェイサービスが実行されていて、ゲートウェイの詳細が接続構成で更新されていることを確認してください。 | ゲートウェイを使用してコンピューターを確認し、Power BI ゲートウェイアプリケーションを開いて、ゲートウェイが実行されていることを確認してください。 ゲートウェイが Microsoft Search と同じ管理者アカウントを使用していることを確認してから、すべてのゲートウェイの詳細が接続構成で更新されていることを確認してください。
1005 | このデータソースに関連付けられている資格情報は有効期限が切れています。 資格情報を更新し、接続を更新します。 | [ **編集** ] をクリックして、認証資格情報を更新します。
1006 | ゲートウェイのバージョンが古いため、このコネクタをサポートしていません。 ゲートウェイを更新する必要があります。 | 「 [オンプレミスのデータゲートウェイをインストール](https://docs.microsoft.com/data-integration/gateway/service-gateway-install) する」を参照して、ゲートウェイが含まれているコンピューターに power BI ゲートウェイの最新バージョンをダウンロードしてインストールしてください。
1007 | 有効な Power BI ライセンスが検出されませんでした。 このクロールを実行するには、有効な Power BI ライセンスが必要です。 | このクロールを実行するには、有効な Power BI ライセンスが必要です。 組織に有効なライセンスがあるかどうかを確認します。 その場合は、もう一度試してください。 そうでない場合は、ライセンスを取得して、もう一度実行してください。
1008 | テナントのクォータ使用率の合計が上限に達しました。 クォータの一部を解放したり、取り込みフィルターを調整してデータを少なくしたりするには、接続を削除してみてください。 | クォータの一部を解放したり、取り込みフィルターを調整してデータを少なくしたりするには、接続を削除してみてください。 これらの方法で問題が解決しない場合は、Microsoft サポートにお問い合わせください。
2001 | インデックスは、キューに大量の更新があるために調整されます。 キューによっては、更新が完了するまでに少し時間がかかることがあります。 | キューがクリアされるまで待機してください。
2002 | アイテムの書式設定がサポートされていないため、インデックス付けに失敗しました | 詳細については、「コネクタ固有のドキュメント」を参照してください。
2003 | サポートされていないアイテムのコンテンツによってインデックス付けが失敗しました。 | 詳細については、「コネクタ固有のドキュメント」を参照してください。
5000 | 問題が発生しました。 この問題が解決しない場合は、サポートにお問い合わせください。 |

## <a name="monitor-your-index-quota-utilization"></a>インデックスクォータ使用率を監視する

利用可能なインデックスクォータと使用量が [コネクタ] ランディングページに表示されます。

![インデックスクォータ使用率バー](media/quota_utilization.png)

>[!NOTE]
>プレビュー期間中、グラフコネクタを試行しているすべての組織には、すべての接続で最大200万個のアイテムの空き固定クォータが提供されていました。 通常、グラフコネクタを使用できるようにすると、プレビューでグラフコネクタを使用していた組織に対して、2021年2月1日に空きクォータが有効期限切れになります。
>["Preview"](connectors-preview.md)というラベルの付いた Microsoft のグラフコネクタは、組織の課金対象インデックスクォータの合計に含まれません。 ただし、組織で構成できる最大10個の接続数と、組織が接続を超えてインデックスを作成できる700万アイテムの最大数に対してカウントされます。

クォータ使用率バーは、組織によるクォータ消費量に基づいたさまざまな状態を示します。

State | クォータ使用量
--- | ---
標準 | 1-69%
高 | 70-89%
重大 | 90%-99%
Full | 100%

インデックスが作成されたアイテムの数も、接続ごとに表示されます。 各接続によってインデックスが作成されたアイテムの数は、組織で使用可能なクォータの合計に影響します。

組織のインデックスクォータを超過すると、すべてのアクティブな接続が影響を受け、それらの接続は **制限を超える** 状態で動作します。 この状態では、アクティブな接続  

* 新しいアイテムを追加することはできません。

* 既存のアイテムを更新または削除できるようになります。

この問題を解決するには、次のいずれかの操作を行います。

* [ライセンス要件と価格設定](licensing.md)で、組織のインデックスクォータを購入する方法について説明します。

* 取り込まれたされているコンテンツが多すぎる接続を特定し、それらを更新して、クォータを確保するためのスペースを作成するアイテムの数を減らします。 接続を更新するには、新しい取り込みフィルターを使用して新しい接続を削除して作成する必要があります。これにより、アイテム数を減らすことができます。

* 1つまたは複数の接続を完全に削除する

## <a name="limitations"></a>制限事項

* Microsoft によって作成されたコネクタを **公開** する場合、接続が作成されるまで数分かかる場合があります。 その間、接続の状態が [保留中] と表示されます。

* [Microsoft 365 管理センター](https://admin.microsoft.com)は、接続が公開された後の **検索スキーマ** の編集をサポートしていません。 検索スキーマを編集するには、接続を削除してから、新しい接続を作成します。

* 取り込みスループットは、1秒あたり約4アイテムに調整されます。

* スキーマの更新はサポートされていません。 接続設定を作成した後、スキーマを更新する方法はありません。 接続を削除して再作成することはできません。

* 接続制限があります。 各テナントは最大10個の接続を作成できます。

* 接続の編集サポートを利用できません。 接続が作成されたら、編集または変更することはできません。 詳細を変更する必要がある場合は、接続を削除して再作成する必要があります。
