---
title: Microsoft Search 用 Oracle SQL connector
ms.author: vivg
author: Vivek
manager: harshkum
ms.audience: Admin
ms.topic: article
ms.service: mssearch
localization_priority: Normal
search.appverid:
- BFB160
- MET150
- MOE150
description: Microsoft Search 用 Oracle SQL connector をセットアップします。
ms.openlocfilehash: cf7946533b3806bb730cdc6a31f7745ebad2c59d
ms.sourcegitcommit: ac4e261c01262be747341f810d2d1faf220d3961
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 11/23/2020
ms.locfileid: "49382696"
---
# <a name="oracle-sql-connector"></a><span data-ttu-id="d52ee-103">Oracle SQL コネクタ</span><span class="sxs-lookup"><span data-stu-id="d52ee-103">Oracle SQL connector</span></span>

<span data-ttu-id="d52ee-104">Oracle SQL コネクタを使用すると、組織は社内の Oracle データベースからデータを検出し、インデックスを作成できます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-104">With the Oracle SQL connector, your organization can discover and index data from an on-premises Oracle database.</span></span> <span data-ttu-id="d52ee-105">コネクタは、指定されたコンテンツを Microsoft Search にインデックス付けします。</span><span class="sxs-lookup"><span data-stu-id="d52ee-105">The connector indexes specified content into Microsoft Search.</span></span> <span data-ttu-id="d52ee-106">ソースデータのインデックスを最新の状態に保つために、フルクロールと増分クロールを定期的に行います。</span><span class="sxs-lookup"><span data-stu-id="d52ee-106">To keep the index up to date with source data, it supports periodic full and incremental crawls.</span></span> <span data-ttu-id="d52ee-107">Oracle SQL コネクタを使用すると、特定のユーザーに対する検索結果へのアクセスを制限することもできます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-107">With the Oracle SQL connector, you can also restrict access to search results for certain users.</span></span>

<span data-ttu-id="d52ee-108">この記事は、Microsoft 365 管理者または Oracle SQL コネクタを構成、実行、および監視するユーザーを対象としています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-108">This article is for Microsoft 365 administrators or anyone who configures, runs, and monitors an Oracle SQL connector.</span></span> <span data-ttu-id="d52ee-109">コネクタとコネクタの機能、制限事項、およびトラブルシューティングの手法を構成する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-109">It explains how to configure your connector and connector capabilities, limitations, and troubleshooting techniques.</span></span>

## <a name="install-the-graph-connector-agent"></a><span data-ttu-id="d52ee-110">Graph connector エージェントをインストールする</span><span class="sxs-lookup"><span data-stu-id="d52ee-110">Install the Graph connector agent</span></span>
<span data-ttu-id="d52ee-111">オンプレミスのサードパーティデータにアクセスするためには、Graph connector エージェントをインストールして構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-111">In order to access your on-premises third-party data, you must install and configure the Graph connector agent.</span></span> <span data-ttu-id="d52ee-112">詳細について [は、「Graph connector agent をインストール](on-prem-agent.md) する」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d52ee-112">See [Install the Graph connector agent](on-prem-agent.md) to learn more.</span></span>  

## <a name="connect-to-a-data-source"></a><span data-ttu-id="d52ee-113">データソースへの接続</span><span class="sxs-lookup"><span data-stu-id="d52ee-113">Connect to a data source</span></span>
<span data-ttu-id="d52ee-114">Oracle SQL コネクタをデータソースに接続するには、クロールするデータベースサーバーとオンプレミスのグラフコネクタエージェントを構成する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-114">To connect your Oracle SQL connector to a data source, you must configure the database server you want crawled and the on-premises Graph connector agent.</span></span> <span data-ttu-id="d52ee-115">その後、必要な認証方法を使用してデータベースに接続できます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-115">You can then connect to the database with the required authentication method.</span></span>

<span data-ttu-id="d52ee-116">Oracle SQL コネクタの場合は、ホスト名、ポート、およびサービス (データベース) の名前を、推奨される認証方法、ユーザー名、およびパスワードと共に指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-116">For Oracle SQL connector, you need to specify the Hostname, Port and Service (database) name along with the preferred authentication method, username and password.</span></span>

> [!NOTE]
> <span data-ttu-id="d52ee-117">コネクタが接続できるようにするには、データベースで Oracle データベースバージョン11g 以降を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-117">Your database must run Oracle database version 11g or later for the connector to be able to connect.</span></span> <span data-ttu-id="d52ee-118">コネクタは、Windows、Linux、および Azure VM プラットフォームでホストされている Oracle データベースをサポートします。</span><span class="sxs-lookup"><span data-stu-id="d52ee-118">The connector supports Oracle database hosted on Windows, Linux and Azure VM platforms.</span></span>

<span data-ttu-id="d52ee-119">データベースコンテンツを検索するには、コネクタを構成するときに SQL クエリを指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-119">To search your database content, you must specify SQL queries when you configure the connector.</span></span> <span data-ttu-id="d52ee-120">これらの SQL クエリは、すべての列を取得するために実行する必要があるすべての SQL 結合を含む、インデックスを作成するすべてのデータベース列に名前を付ける必要があります (つまり、ソースプロパティ)。</span><span class="sxs-lookup"><span data-stu-id="d52ee-120">These SQL queries need to name all the database columns that you want to index (i.e. source properties), including any SQL joins that need to be performed to get all the columns.</span></span> <span data-ttu-id="d52ee-121">検索結果へのアクセスを制限するには、コネクタを構成するときに SQL クエリ内でアクセス制御リスト (Acl) を指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-121">To restrict access to search results, you must specify Access Control Lists (ACLs) within SQL queries when you configure the connector.</span></span>

## <a name="full-crawl-required"></a><span data-ttu-id="d52ee-122">フルクロール (必須)</span><span class="sxs-lookup"><span data-stu-id="d52ee-122">Full crawl (Required)</span></span>
<span data-ttu-id="d52ee-123">この手順では、データベースのフルクロールを実行する SQL クエリを構成します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-123">In this step, you configure the SQL query that runs a full crawl of the database.</span></span> <span data-ttu-id="d52ee-124">フルクロールでは、**クエリ** 可能、**検索** 可能、または取得可能にするすべての列またはプロパティが選択 **されます。**</span><span class="sxs-lookup"><span data-stu-id="d52ee-124">The full crawl selects all the columns or properties you want to be made **queryable**, **searchable**, or **retrievable**.</span></span> <span data-ttu-id="d52ee-125">また、ACL 列を指定して、検索結果のアクセスを特定のユーザーまたはグループに制限することもできます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-125">You can also specify ACL columns to restrict access of search results to specific users or groups.</span></span>

> [!Tip]
> <span data-ttu-id="d52ee-126">必要なすべての列を取得するには、複数のテーブルに結合することができます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-126">To get all the columns that you need, you can join multiple tables.</span></span>

![プロパティの例を使用して、OrderTable と AclTable を示すスクリプト](media/MSSQL-fullcrawl.png)

### <a name="select-data-columns-required-and-acl-columns-optional"></a><span data-ttu-id="d52ee-128">データ列の選択 (必須) と ACL 列 (省略可能)</span><span class="sxs-lookup"><span data-stu-id="d52ee-128">Select data columns (Required) and ACL columns (Optional)</span></span>
<span data-ttu-id="d52ee-129">この例では、検索のデータを保持する5つのデータ列 (OrderId、OrderTitle、Ordertitle、Htmldatetime、および IsDeleted) の選択例を示します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-129">The example demonstrates selection of five data columns that hold the data for the search: OrderId, OrderTitle, OrderDesc, CreatedDateTime, and IsDeleted.</span></span> <span data-ttu-id="d52ee-130">データの各行に対して表示権限を設定するには、必要に応じて、次の ACL 列を選択できます。 AllowedUsers、Allowedusers、DeniedUsers、および DeniedGroups。</span><span class="sxs-lookup"><span data-stu-id="d52ee-130">To set view permissions for each row of data, you can optionally select these ACL columns: AllowedUsers, AllowedGroups, DeniedUsers, and DeniedGroups.</span></span> <span data-ttu-id="d52ee-131">これらのすべてのデータ列は、 **クエリ** 可能、 **検索** 可能 **、または** 取得可能にすることができます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-131">All these data columns can be made **queryable**, **searchable**, or **retrievable**.</span></span>

<span data-ttu-id="d52ee-132">次のクエリ例に示すように、データ列を選択します。 `SELECT OrderId, OrderTitle, OrderDesc, AllowedUsers, AllowedGroups, DeniedUsers, DeniedGroups, CreatedDateTime, IsDeleted`</span><span class="sxs-lookup"><span data-stu-id="d52ee-132">Select data columns as shown in this example query: `SELECT OrderId, OrderTitle, OrderDesc, AllowedUsers, AllowedGroups, DeniedUsers, DeniedGroups, CreatedDateTime, IsDeleted`</span></span>
 
<span data-ttu-id="d52ee-133">検索結果へのアクセスを管理するには、クエリで1つ以上の ACL 列を指定できます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-133">To manage access to the search results, you can specify one or more ACL columns in the query.</span></span> <span data-ttu-id="d52ee-134">SQL コネクタを使用すると、レコードレベルごとにアクセスを制御できます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-134">The SQL connector allows you to control access at per record level.</span></span> <span data-ttu-id="d52ee-135">テーブル内のすべてのレコードに対して同じアクセス制御を行うことを選択できます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-135">You can choose to have the same access control for all records in a table.</span></span> <span data-ttu-id="d52ee-136">ACL 情報が別のテーブルに格納されている場合は、クエリでそれらのテーブルを使用して結合する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-136">If the ACL information is stored in a separate table, you might have to do a join with those tables in your query.</span></span>

<span data-ttu-id="d52ee-137">以下では、上記のクエリで各 ACL 列を使用する方法について説明します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-137">The use of each of the ACL columns in the above query is described below.</span></span> <span data-ttu-id="d52ee-138">次のリストでは、4つの **アクセス制御メカニズム** について説明します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-138">The following list explains the 4 **access control mechanisms**.</span></span> 
* <span data-ttu-id="d52ee-139">**Allowedusers**: これにより、検索結果にアクセスできるユーザー id のリストを指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-139">**AllowedUsers**: This specifies the list of user IDs who will be able to access the search results.</span></span> <span data-ttu-id="d52ee-140">次の例では、ユーザーのリスト: john@contoso.com、keith@contoso.com、および lisa@contoso.com には、OrderId = 12 のレコードへのアクセスのみが許可されています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-140">In the following example, list of users: john@contoso.com, keith@contoso.com, and lisa@contoso.com would only have access to a record with OrderId = 12.</span></span> 
* <span data-ttu-id="d52ee-141">**Allowedgroups**: これにより、検索結果にアクセスできるユーザーのグループが指定されます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-141">**AllowedGroups**: This specifies the group of users who will be able to access the search results.</span></span> <span data-ttu-id="d52ee-142">次の例では、グループ sales-team@contoso.com は OrderId = 12 のレコードにのみアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-142">In the following example, group sales-team@contoso.com would only have access to record with OrderId = 12.</span></span>
* <span data-ttu-id="d52ee-143">**DeniedUsers**: 検索結果への **アクセス権を持たない** ユーザーのリストを指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-143">**DeniedUsers**: This specifies the list of users who do **not** have access to the search results.</span></span> <span data-ttu-id="d52ee-144">次の例では、ユーザー john@contoso.com および keith@contoso.com は OrderId = 13 のレコードにアクセスできませんが、他のすべてのユーザーはこのレコードにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-144">In the following example, users john@contoso.com and keith@contoso.com do not have access to record with OrderId = 13, whereas everyone else has access to this record.</span></span> 
* <span data-ttu-id="d52ee-145">**DeniedGroups**: 検索結果への **アクセス権を持たない** ユーザーのグループを指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-145">**DeniedGroups**: This specifies the group of users who do **not** have access to the search results.</span></span> <span data-ttu-id="d52ee-146">次の例では、groups engg-team@contoso.com および pm-team@contoso.com には OrderId = 15 のレコードへのアクセス権がありませんが、他のユーザーはこのレコードにアクセスできます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-146">In the following example, groups engg-team@contoso.com and pm-team@contoso.com do not have access to record with OrderId = 15, whereas everyone else has access to this record.</span></span>  

![プロパティの例を使用して、OrderTable と AclTable を表示するサンプルデータ](media/MSSQL-ACL1.png)

### <a name="supported-data-types"></a><span data-ttu-id="d52ee-148">サポートされるデータ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-148">Supported data types</span></span>
<span data-ttu-id="d52ee-149">次の表は、Oracle SQL コネクタでサポートされているデータ型の概要を示しています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-149">The below table summarizes the data types that are supported by the Oracle SQL connector.</span></span> <span data-ttu-id="d52ee-150">また、サポートされている SQL データ型のインデックスデータ型の概要を示します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-150">The table also summarizes the indexing data type for the supported SQL data type.</span></span> <span data-ttu-id="d52ee-151">インデックス用にサポートされている Microsoft Graph コネクタの詳細については、「 [プロパティリソースの種類](https://docs.microsoft.com/graph/api/resources/property?view=graph-rest-beta#properties)に関するドキュメント」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d52ee-151">To learn more about Microsoft Graph connectors supported data types for indexing, refer documentation on [property resource types](https://docs.microsoft.com/graph/api/resources/property?view=graph-rest-beta#properties).</span></span> 

| <span data-ttu-id="d52ee-152">カテゴリ</span><span class="sxs-lookup"><span data-stu-id="d52ee-152">Category</span></span> | <span data-ttu-id="d52ee-153">ソースデータ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-153">Source data type</span></span> | <span data-ttu-id="d52ee-154">インデックス作成データの種類</span><span class="sxs-lookup"><span data-stu-id="d52ee-154">Indexing data type</span></span> |
| ------------ | ------------ | ------------ |
| <span data-ttu-id="d52ee-155">数値データ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-155">Number datatype</span></span> | <span data-ttu-id="d52ee-156">数値 (p, 0)</span><span class="sxs-lookup"><span data-stu-id="d52ee-156">NUMBER(p,0)</span></span> | <span data-ttu-id="d52ee-157">int64 (p <= 18)</span><span class="sxs-lookup"><span data-stu-id="d52ee-157">int64 (for p <= 18)</span></span> <br> <span data-ttu-id="d52ee-158">倍精度浮動小数点型 (p > 18)</span><span class="sxs-lookup"><span data-stu-id="d52ee-158">double (for p > 18)</span></span> |
| <span data-ttu-id="d52ee-159">浮動小数点の数値データ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-159">Floating-point number datatype</span></span> | <span data-ttu-id="d52ee-160">数値 (p、s)</span><span class="sxs-lookup"><span data-stu-id="d52ee-160">NUMBER(p,s)</span></span> <br> <span data-ttu-id="d52ee-161">FLOAT (p)</span><span class="sxs-lookup"><span data-stu-id="d52ee-161">FLOAT(p)</span></span> | <span data-ttu-id="d52ee-162">double</span><span class="sxs-lookup"><span data-stu-id="d52ee-162">double</span></span> |
| <span data-ttu-id="d52ee-163">Date データ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-163">Date datatype</span></span> | <span data-ttu-id="d52ee-164">状態</span><span class="sxs-lookup"><span data-stu-id="d52ee-164">DATE</span></span> <br> <span data-ttu-id="d52ee-165">示</span><span class="sxs-lookup"><span data-stu-id="d52ee-165">TIMESTAMP</span></span> <br> <span data-ttu-id="d52ee-166">タイムスタンプ (n)</span><span class="sxs-lookup"><span data-stu-id="d52ee-166">TIMESTAMP(n)</span></span> | <span data-ttu-id="d52ee-167">日付型</span><span class="sxs-lookup"><span data-stu-id="d52ee-167">datetime</span></span> |
| <span data-ttu-id="d52ee-168">文字データ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-168">Character datatype</span></span> | <span data-ttu-id="d52ee-169">CHAR (n)</span><span class="sxs-lookup"><span data-stu-id="d52ee-169">CHAR(n)</span></span> <br> <span data-ttu-id="d52ee-170">VARCHAR</span><span class="sxs-lookup"><span data-stu-id="d52ee-170">VARCHAR</span></span> <br> <span data-ttu-id="d52ee-171">VARCHAR2</span><span class="sxs-lookup"><span data-stu-id="d52ee-171">VARCHAR2</span></span> <br> <span data-ttu-id="d52ee-172">L</span><span class="sxs-lookup"><span data-stu-id="d52ee-172">LONG</span></span> <br> <span data-ttu-id="d52ee-173">CLOB</span><span class="sxs-lookup"><span data-stu-id="d52ee-173">CLOB</span></span> <br> <span data-ttu-id="d52ee-174">NCLOB</span><span class="sxs-lookup"><span data-stu-id="d52ee-174">NCLOB</span></span> | <span data-ttu-id="d52ee-175">string</span><span class="sxs-lookup"><span data-stu-id="d52ee-175">string</span></span> |
| <span data-ttu-id="d52ee-176">Unicode 文字データ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-176">Unicode character datatype</span></span> | <span data-ttu-id="d52ee-177">NCHAR</span><span class="sxs-lookup"><span data-stu-id="d52ee-177">NCHAR</span></span> <br> <span data-ttu-id="d52ee-178">NVARCHAR</span><span class="sxs-lookup"><span data-stu-id="d52ee-178">NVARCHAR</span></span> | <span data-ttu-id="d52ee-179">string</span><span class="sxs-lookup"><span data-stu-id="d52ee-179">string</span></span> |
| <span data-ttu-id="d52ee-180">RowID データ型</span><span class="sxs-lookup"><span data-stu-id="d52ee-180">RowID datatype</span></span> | <span data-ttu-id="d52ee-181">ROWID</span><span class="sxs-lookup"><span data-stu-id="d52ee-181">ROWID</span></span> <br> <span data-ttu-id="d52ee-182">UROWID</span><span class="sxs-lookup"><span data-stu-id="d52ee-182">UROWID</span></span> | <span data-ttu-id="d52ee-183">string</span><span class="sxs-lookup"><span data-stu-id="d52ee-183">string</span></span> |

<span data-ttu-id="d52ee-184">現在直接サポートされていないその他のデータ型については、列は、サポートされているデータ型に明示的にキャストする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-184">For any other data type currently not directly supported, the column needs to be explicitly cast to a supported data type.</span></span>

### <a name="watermark-required"></a><span data-ttu-id="d52ee-185">ウォーターマーク (必須)</span><span class="sxs-lookup"><span data-stu-id="d52ee-185">Watermark (Required)</span></span>
<span data-ttu-id="d52ee-186">データベースが過負荷にならないようにするために、コネクタはフルクロールのウォーターマーク列を使用して、フルクロールクエリをバッチ処理および再開します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-186">To prevent overloading the database, the connector batches and resumes full-crawl queries with a full-crawl watermark column.</span></span> <span data-ttu-id="d52ee-187">[すかし] 列の値を使用すると、以降の各バッチが取得され、最後のチェックポイントからクエリが再開されます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-187">By using the value of the watermark column, each subsequent batch is fetched, and querying is resumed from the last checkpoint.</span></span> <span data-ttu-id="d52ee-188">基本的には、フルクロールのデータ更新を制御するメカニズムを示します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-188">Essentially this is a mechanism to control data refresh for full crawls.</span></span>

<span data-ttu-id="d52ee-189">次の例に示すように、ウォーターマークに対してクエリスニペットを作成します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-189">Create query snippets for watermarks as shown in these examples:</span></span>
* <span data-ttu-id="d52ee-190">`WHERE (CreatedDateTime > @watermark)`.</span><span class="sxs-lookup"><span data-stu-id="d52ee-190">`WHERE (CreatedDateTime > @watermark)`.</span></span> <span data-ttu-id="d52ee-191">予約済みのキーワードを使用して、ウォーターマーク列名を指定し `@watermark` ます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-191">Cite the watermark column name with the reserved keyword `@watermark`.</span></span> <span data-ttu-id="d52ee-192">[すかし] 列は、昇順でのみ並べ替えることができます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-192">You can only sort the watermark column in ascending order.</span></span>
* <span data-ttu-id="d52ee-193">`ORDER BY CreatedDateTime ASC`.</span><span class="sxs-lookup"><span data-stu-id="d52ee-193">`ORDER BY CreatedDateTime ASC`.</span></span> <span data-ttu-id="d52ee-194">[すかし] 列を昇順で並べ替えます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-194">Sort on the watermark column in ascending order.</span></span>

<span data-ttu-id="d52ee-195">次の図に示す構成では、[ `CreatedDateTime` 選択されたウォーターマーク] 列が選択されています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-195">In the configuration shown in the following image, `CreatedDateTime` is the selected watermark column.</span></span> <span data-ttu-id="d52ee-196">行の最初のバッチをフェッチするには、[すかし] 列のデータ型を指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-196">To fetch the first batch of rows, specify the data type of the watermark column.</span></span> <span data-ttu-id="d52ee-197">この例では、データ型は `DateTime` です。</span><span class="sxs-lookup"><span data-stu-id="d52ee-197">In this case, the data type is `DateTime`.</span></span>

![ウォーターマーク列の構成](media/MSSQL-watermark.png)

<span data-ttu-id="d52ee-199">最初のクエリは、次の値を使用して、最初の **N 個** の行をフェッチします。 "/1 月1日 > 1753 00:00:00" (datetime データ型の最小値)。</span><span class="sxs-lookup"><span data-stu-id="d52ee-199">The first query fetches the first **N** number of rows by using: "CreatedDateTime > January 1, 1753 00:00:00" (min value of DateTime data type).</span></span> <span data-ttu-id="d52ee-200">最初のバッチをフェッチした後、 `CreatedDateTime` バッチで返される最大値は、行が昇順で並べ替えられている場合に、チェックポイントとして保存されます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-200">After the first batch is fetched, the highest value of `CreatedDateTime` returned in the batch is saved as the checkpoint if the rows are sorted in ascending order.</span></span> <span data-ttu-id="d52ee-201">例としては、2019年3月1日、03:00:00 があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-201">An example is March 1, 2019 03:00:00.</span></span> <span data-ttu-id="d52ee-202">その後、 **N** 行の次のバッチは、クエリ内の "/datetime > 03:00:00 2019 年3月1日を使用してフェッチされます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-202">Then the next batch of **N** rows is fetched by using "CreatedDateTime > March 1, 2019 03:00:00" in the query.</span></span>

### <a name="skipping-soft-deleted-rows-optional"></a><span data-ttu-id="d52ee-203">削除された削除済みの行をスキップする (オプション)</span><span class="sxs-lookup"><span data-stu-id="d52ee-203">Skipping soft-deleted rows (Optional)</span></span>
<span data-ttu-id="d52ee-204">データベース内の削除済みの行をインデックス作成から除外するには、その行が削除されたことを示す、回復可能な削除の列名と値を指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-204">To exclude soft-deleted rows in your database from being indexed, specify the soft-delete column name and value that indicates the row is deleted.</span></span>

![論理削除の設定: "削除済みの行を示す" 論理削除列 "および" 値 (論理削除列) "](media/MSSQL-softdelete.png)

### <a name="full-crawl-manage-search-permissions"></a><span data-ttu-id="d52ee-206">フルクロール: 検索権限を管理する</span><span class="sxs-lookup"><span data-stu-id="d52ee-206">Full crawl: Manage search permissions</span></span>
<span data-ttu-id="d52ee-207">[アクセス **許可の管理** ] をクリックして、アクセス制御メカニズムを指定するさまざまなアクセス制御 (ACL) 列を選択します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-207">Click **Manage permissions** to select the various access control (ACL) columns which specify the access control mechanism.</span></span> <span data-ttu-id="d52ee-208">フルクロール SQL クエリで指定した列名を選択します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-208">Select the column name you specified in the full crawl SQL query.</span></span> 

<span data-ttu-id="d52ee-209">各 ACL 列は複数値の列になることが想定されています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-209">Each of the ACL columns is expected to be a multi-valued column.</span></span> <span data-ttu-id="d52ee-210">これらの複数の ID 値は、セミコロン (;)、コンマ (,) などの区切り記号で区切ることができます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-210">These multiple ID values can be separated by separators such as semicolon (;), comma (,), and so on.</span></span> <span data-ttu-id="d52ee-211">この区切り記号は、[値の **区切り記号** ] フィールドで指定する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-211">You need to specify this separator in the **value separator** field.</span></span>
 
<span data-ttu-id="d52ee-212">Acl としてを使用するために、次の ID タイプがサポートされています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-212">The following ID types are supported for using as ACLs:</span></span> 
* <span data-ttu-id="d52ee-213">**ユーザープリンシパル名 (upn)**: ユーザープリンシパル名 (upn) は、電子メールアドレス形式のシステムユーザーの名前です。</span><span class="sxs-lookup"><span data-stu-id="d52ee-213">**User Principal Name (UPN)**: A User Principal Name (UPN) is the name of a system user in an email address format.</span></span> <span data-ttu-id="d52ee-214">UPN (例: john.doe@domain.com) は、ユーザー名 (ログオン名)、区切り記号 (@ 記号)、およびドメイン名 (UPN サフィックス) で構成されます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-214">A UPN (for example: john.doe@domain.com) consists of the username (logon name), separator (the @ symbol), and domain name (UPN suffix).</span></span> 
* <span data-ttu-id="d52ee-215">**Azure Active Directory (AAD) ID**: azure AD では、すべてのユーザーまたはグループのオブジェクト ID が ' e0d3ad3d-0000-1111-2222-3c5f5c52ab9b ' のようになります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-215">**Azure Active Directory (AAD) ID**: In Azure AD, every user or group has an object ID which looks something like ‘e0d3ad3d-0000-1111-2222-3c5f5c52ab9b’</span></span> 
* <span data-ttu-id="d52ee-216">**Active Directory (AD) セキュリティ ID**: オンプレミスの AD セットアップでは、すべてのユーザーとグループに、1-5-21-3878594291-2115959936-132693609-65242 というような不変の一意のセキュリティ識別子があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-216">**Active Directory (AD) Security ID**: In an on-premises AD setup, every user and group have an immutable, unique security identifier which looks something like ‘S-1-5-21-3878594291-2115959936-132693609-65242.’</span></span>

![アクセス制御リストを構成するための検索アクセス許可の設定](media/MSSQL-ACL2.png)

## <a name="incremental-crawl-optional"></a><span data-ttu-id="d52ee-218">増分クロール (オプション)</span><span class="sxs-lookup"><span data-stu-id="d52ee-218">Incremental crawl (Optional)</span></span>
<span data-ttu-id="d52ee-219">このオプションの手順では、データベースの増分クロールを実行するための SQL クエリを指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-219">In this optional step, provide a SQL query to run an incremental crawl of the database.</span></span> <span data-ttu-id="d52ee-220">このクエリでは、最後の増分クロール以降のデータの変更が SQL コネクタによって決定されます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-220">With this query, the SQL connector determines any changes to the data since the last incremental crawl.</span></span> <span data-ttu-id="d52ee-221">フルクロールの場合と同様に、 **クエリ** 可能、 **検索** 可能、または取得可能にするすべての列を **選択します**。</span><span class="sxs-lookup"><span data-stu-id="d52ee-221">As in the full crawl, select all columns that you want to be made **queryable**, **searchable**, or **retrievable**.</span></span> <span data-ttu-id="d52ee-222">フルクロールクエリで指定したものと同じ ACL 列のセットを指定します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-222">Specify the same set of ACL columns that you specified in the full crawl query.</span></span>

<span data-ttu-id="d52ee-223">次の図のコンポーネントは、完全なクロールコンポーネントに似ていますが、1つの例外があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-223">The components in the following image resemble the full crawl components with one exception.</span></span> <span data-ttu-id="d52ee-224">この例では、"ModifiedDateTime" は選択された透かし列です。</span><span class="sxs-lookup"><span data-stu-id="d52ee-224">In this case, "ModifiedDateTime" is the selected watermark column.</span></span> <span data-ttu-id="d52ee-225">[フルクロールの手順](#full-crawl-required)を確認して、増分クロールクエリを記述する方法を説明し、次の画像を例として示します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-225">Review the [full crawl steps](#full-crawl-required) to learn how to write your incremental crawl query and see the following image as an example.</span></span>

![OrderTable、AclTable、使用できるプロパティの例を示す増分クロールスクリプト。](media/MSSQL-incrcrawl.png)

## <a name="manage-search-permissions"></a><span data-ttu-id="d52ee-227">検索アクセス許可を管理する</span><span class="sxs-lookup"><span data-stu-id="d52ee-227">Manage search permissions</span></span> 
<span data-ttu-id="d52ee-228">[フルクロール画面で指定された acl](#full-crawl-manage-search-permissions)を使用するか、すべてのユーザーにコンテンツを表示するように上書きするかを選択できます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-228">You can choose to use the [ACLs specified in the full crawl screen](#full-crawl-manage-search-permissions) or you can override them to make your content visible to everyone.</span></span>

## <a name="set-the-refresh-schedule"></a><span data-ttu-id="d52ee-229">更新スケジュールを設定する</span><span class="sxs-lookup"><span data-stu-id="d52ee-229">Set the refresh schedule</span></span>
<span data-ttu-id="d52ee-230">Oracle SQL コネクタは、フルクロールと増分クロールの両方の更新スケジュールをサポートしています。</span><span class="sxs-lookup"><span data-stu-id="d52ee-230">The Oracle SQL connector supports refresh schedules for both full and incremental crawls.</span></span> <span data-ttu-id="d52ee-231">両方を設定することをお勧めします。</span><span class="sxs-lookup"><span data-stu-id="d52ee-231">We recommend that you set both.</span></span>

<span data-ttu-id="d52ee-232">フルクロールスケジュールは、Microsoft 検索インデックスと同期フィルターから移動されたすべての行に対して以前に同期された削除済みの行を検索します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-232">A full crawl schedule finds deleted rows that were previously synced to the Microsoft Search index and any rows that moved out of the sync filter.</span></span> <span data-ttu-id="d52ee-233">最初にデータベースに接続すると、フルクロールが実行されて、フルクロールクエリから取得したすべての行が同期されます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-233">When you first connect to the database, a full crawl runs to sync all the rows retrieved from the full crawl query.</span></span> <span data-ttu-id="d52ee-234">新しい行を同期し、更新を行うには、増分クロールをスケジュールする必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-234">To sync new rows and make updates, you need to schedule incremental crawls.</span></span>

## <a name="next-steps-customize-the-search-results-page"></a><span data-ttu-id="d52ee-235">次の手順: 検索結果ページをカスタマイズする</span><span class="sxs-lookup"><span data-stu-id="d52ee-235">Next steps: Customize the search results page</span></span>
<span data-ttu-id="d52ee-236">独自の業種と結果の種類を作成することで、エンドユーザーは新しい接続から検索結果を表示できるようになります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-236">Create your own verticals and result types, so end users can view search results from new connections.</span></span> <span data-ttu-id="d52ee-237">この手順を行わないと、接続からのデータが検索結果ページに表示されません。</span><span class="sxs-lookup"><span data-stu-id="d52ee-237">Without this step, data from your connection won’t show up on the search results page.</span></span>

<span data-ttu-id="d52ee-238">業種および MRTs の作成方法の詳細については、「 [検索結果ページのカスタマイズ](customize-search-page.md)」を参照してください。</span><span class="sxs-lookup"><span data-stu-id="d52ee-238">To learn more about how to create your verticals and MRTs, see [Search results page customization](customize-search-page.md).</span></span>

## <a name="limitations"></a><span data-ttu-id="d52ee-239">制限事項</span><span class="sxs-lookup"><span data-stu-id="d52ee-239">Limitations</span></span>
<span data-ttu-id="d52ee-240">Oracle SQL コネクタには、次のようなプレビューリリースの制限があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-240">The Oracle SQL connector has these limitations in the preview release:</span></span>
* <span data-ttu-id="d52ee-241">オンプレミスデータベースで Oracle データベースバージョン11g 以降を実行する必要があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-241">The on-premises database must run Oracle Database version 11g or later.</span></span>
* <span data-ttu-id="d52ee-242">Acl は、ユーザープリンシパル名 (UPN)、Azure Active Directory (Azure AD)、または Active Directory セキュリティを使用する場合にのみサポートされます。</span><span class="sxs-lookup"><span data-stu-id="d52ee-242">ACLs are only supported by using a User Principal Name (UPN), Azure Active Directory (Azure AD), or Active Directory Security.</span></span> 
* <span data-ttu-id="d52ee-243">データベース列内のリッチコンテンツのインデックス作成はサポートされていません。</span><span class="sxs-lookup"><span data-stu-id="d52ee-243">Indexing rich content inside database columns is not supported.</span></span> <span data-ttu-id="d52ee-244">このようなコンテンツの例としては、HTML、JSON、XML、blob、ドキュメント parsings などがあります。これらは、データベース列内のリンクとして存在します。</span><span class="sxs-lookup"><span data-stu-id="d52ee-244">Examples of such content are HTML, JSON, XML, blobs, and document parsings that exist as links inside the database columns.</span></span>

## <a name="troubleshooting-guide"></a><span data-ttu-id="d52ee-245">トラブルシューティング ガイド</span><span class="sxs-lookup"><span data-stu-id="d52ee-245">Troubleshooting guide</span></span>
<span data-ttu-id="d52ee-246">下には、コネクタを構成する際に観察される一般的なエラーと、考えられる理由の一覧があります。</span><span class="sxs-lookup"><span data-stu-id="d52ee-246">Underneath is a list of common errors observed while configuring the connector and their possible reasons.</span></span>
| <span data-ttu-id="d52ee-247">構成手順</span><span class="sxs-lookup"><span data-stu-id="d52ee-247">Configuration step</span></span> | <span data-ttu-id="d52ee-248">エラー メッセージ</span><span class="sxs-lookup"><span data-stu-id="d52ee-248">Error message</span></span> | <span data-ttu-id="d52ee-249">考えられる理由 (s)</span><span class="sxs-lookup"><span data-stu-id="d52ee-249">Possible reason(s)</span></span> |
| ------------ | ------------ | ------------ |
| <span data-ttu-id="d52ee-250">データベース設定</span><span class="sxs-lookup"><span data-stu-id="d52ee-250">Database settings</span></span> | <span data-ttu-id="d52ee-251">データベースサーバーからのエラー: 接続要求がタイムアウトしました</span><span class="sxs-lookup"><span data-stu-id="d52ee-251">Error from database server: Connection request timed out</span></span> | <span data-ttu-id="d52ee-252">無効なホスト名</span><span class="sxs-lookup"><span data-stu-id="d52ee-252">Invalid Hostname</span></span> <br> <span data-ttu-id="d52ee-253">ホストに到達できない</span><span class="sxs-lookup"><span data-stu-id="d52ee-253">Host not reachable</span></span> |
| <span data-ttu-id="d52ee-254">データベース設定</span><span class="sxs-lookup"><span data-stu-id="d52ee-254">Database settings</span></span> | <span data-ttu-id="d52ee-255">データベースサーバーからのエラー: ORA-12541: TNS: No listner</span><span class="sxs-lookup"><span data-stu-id="d52ee-255">Error from database server: ORA-12541: TNS: No listner</span></span> | <span data-ttu-id="d52ee-256">無効なポート</span><span class="sxs-lookup"><span data-stu-id="d52ee-256">Invalid Port</span></span> |
| <span data-ttu-id="d52ee-257">データベース設定</span><span class="sxs-lookup"><span data-stu-id="d52ee-257">Database settings</span></span> | <span data-ttu-id="d52ee-258">データベースサーバーからのエラー: ORA-12514: TNS: listner は現在、要求されたサービスをコネクタ記述子で認識していません</span><span class="sxs-lookup"><span data-stu-id="d52ee-258">Error from database server: ORA-12514: TNS:listner does not currently know of service requested in connector descriptor</span></span> | <span data-ttu-id="d52ee-259">無効なサービス (データベース) 名</span><span class="sxs-lookup"><span data-stu-id="d52ee-259">Invalid service (database) name</span></span> |
| <span data-ttu-id="d52ee-260">データベース設定</span><span class="sxs-lookup"><span data-stu-id="d52ee-260">Database settings</span></span> | <span data-ttu-id="d52ee-261">データベースサーバーからのエラー: ユーザー ' ' に対するログインに失敗しました `user` 。</span><span class="sxs-lookup"><span data-stu-id="d52ee-261">Error from database server: Login failed for user '`user`'.</span></span> | <span data-ttu-id="d52ee-262">ユーザー名またはパスワードが無効です</span><span class="sxs-lookup"><span data-stu-id="d52ee-262">Invalid username or password</span></span> |